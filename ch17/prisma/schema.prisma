// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Character {
  id       Int       @id @default(autoincrement())
  apiId    Int       @unique // Rick and Morty APIì˜ ìºë¦­í„° ID
  name     String
  episodes Episode[]
}

model Episode {
  id         Int         @id @default(autoincrement())
  apiId      Int         @unique // Rick and Morty APIì˜ ì—í”¼ì†Œë“œ ID
  title      String
  air_date   String
  episode    String
  url        String
  created    DateTime    @default(now())
  characters Character[] // ë‹¤ëŒ€ë‹¤(M:N) ê´€ê³„ ì„¤ì •
  comments   Comment[]   // ì—í”¼ì†Œë“œì— ë‹¬ë¦° ëŒ“ê¸€ (1:N)
}

// ì‚¬ìš©ì ëª¨ë¸
model User {
  id        Int        @id @default(autoincrement())
  name      String     @unique
  // ì‚¬ìš©ìê°€ ì‘ì„±í•œ ëŒ“ê¸€ê³¼ ë°˜ì‘
  comments  Comment[]
  reactions Reaction[]
}

// ëŒ“ê¸€ ëª¨ë¸
model Comment {
  id        Int      @id @default(autoincrement())
  content   String
  createdAt DateTime @default(now())
  // ì‘ì„±ì ì •ë³´ (N:1)
  author    User     @relation(fields: [authorId], references: [id])
  authorId  Int
  // ëŒ“ê¸€ì´ ë‹¬ë¦° ì—í”¼ì†Œë“œ ì •ë³´ (N:1)
  episode   Episode  @relation(fields: [episodeId], references: [id])
  episodeId Int
  // ëŒ“ê¸€ì— ë‹¬ë¦° ë°˜ì‘ (1:N)
  reactions Reaction[]
}

// ë°˜ì‘(ì´ëª¨ì§€) ëª¨ë¸
model Reaction {
  id        Int      @id @default(autoincrement())
  emoji     String // ì˜ˆ: "ğŸ‘", "â¤ï¸"
  createdAt DateTime @default(now())
  // ë°˜ì‘ì„ ë‚¨ê¸´ ì‚¬ìš©ì (N:1)
  user      User     @relation(fields: [userId], references: [id])
  userId    Int
  // ë°˜ì‘ì´ ë‹¬ë¦° ëŒ“ê¸€ (N:1)
  comment   Comment  @relation(fields: [commentId], references: [id])
  commentId Int
} 